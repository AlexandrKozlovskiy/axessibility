\RequirePackage[patches]{pdfmanagement}
\DeclareDocumentMetadata{pdfversion=2.0}
\documentclass{article}
\usepackage{axessibility}
\usepackage{fontspec}
\setmainfont{Times New Roman}
\pagestyle{empty}
\newcommand{\test}[2]{#1+1=#2-1}
\begin{document}
test
\doreplacement{true}
\[1-1=0\] we have an issue,connected with luamode of tagpdf package,if the next not inline formula will be inserted emmidiately after not inline formula,so we should insert some text before the next formula 
$$a+b=a^b$$ $a-b=a/b$
\$$$a^b
=0\$$$
$
a=\sqrt{c^2-b^2}
$
\\$$\alpha+\beta=1
\\$$ \\$\alpha-\beta=0$ $$a-1=b\\$$
%$a
$a\%b= %remainder of division
0$
$$b$$ %\\$-a\\$
%
\$$a^2-b^2=(a+b)*(a-b)\$$
\doreplacement{false}
$\gamma+\beta=1$
this formula was probably inaccessible for screenreaders,at least nvda ignore it,because we switch off preprocessing,but after this formula a new formula should be accessible,because we switch on preprocessing again
\doreplacement{true}
\\$\gamma-\beta=0$
%testing of empty lines in formula
$\$sqrt{\alpha+\beta}=

\sqrt{\alpha-\beta}$
%testing _ character and macrocommands
$$\int\limits_a^b f(x)dx$$ and $\test{1}{3}$ \\\$$a/b-1/b=0\\\$$
\doreplacement{false}
\end{document}